{
  "hash": "ffbf3feb7588221667cebbc749c9ab54",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"A deep dive into table1\"\ndescription: \"This is a subtitle\"\ndate: \"2024-06-21\"\n--- \n\n\n<!--------------- my typical setup ----------------->\n\n\n\n\n\n<!--------------- post begins here ----------------->\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(palmerpenguins)\nlibrary(table1)\nlibrary(dplyr)\n```\n:::\n\n\nThe [table1](https://benjaminrich.github.io/table1/) package ([github link](https://github.com/benjaminrich/table1))\n\nBasic usage:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable1(~ island + bill_length_mm | species, penguins)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"Rtable1\"><table class=\"Rtable1\">\n<thead>\n<tr>\n<th class='rowlabel firstrow lastrow'></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Adelie<br><span class='stratn'>(N=152)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Chinstrap<br><span class='stratn'>(N=68)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Gentoo<br><span class='stratn'>(N=124)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Overall<br><span class='stratn'>(N=344)</span></span></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class='rowlabel firstrow'>island</td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n</tr>\n<tr>\n<td class='rowlabel'>Biscoe</td>\n<td>44 (28.9%)</td>\n<td>0 (0%)</td>\n<td>124 (100%)</td>\n<td>168 (48.8%)</td>\n</tr>\n<tr>\n<td class='rowlabel'>Dream</td>\n<td>56 (36.8%)</td>\n<td>68 (100%)</td>\n<td>0 (0%)</td>\n<td>124 (36.0%)</td>\n</tr>\n<tr>\n<td class='rowlabel lastrow'>Torgersen</td>\n<td class='lastrow'>52 (34.2%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>52 (15.1%)</td>\n</tr>\n<tr>\n<td class='rowlabel firstrow'>bill_length_mm</td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n</tr>\n<tr>\n<td class='rowlabel'>Mean (SD)</td>\n<td>38.8 (2.66)</td>\n<td>48.8 (3.34)</td>\n<td>47.5 (3.08)</td>\n<td>43.9 (5.46)</td>\n</tr>\n<tr>\n<td class='rowlabel'>Median [Min, Max]</td>\n<td>38.8 [32.1, 46.0]</td>\n<td>49.6 [40.9, 58.0]</td>\n<td>47.3 [40.9, 59.6]</td>\n<td>44.5 [32.1, 59.6]</td>\n</tr>\n<tr>\n<td class='rowlabel lastrow'>Missing</td>\n<td class='lastrow'>1 (0.7%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>1 (0.8%)</td>\n<td class='lastrow'>2 (0.6%)</td>\n</tr>\n</tbody>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n## Labels\n\nAdding labels:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlabel(penguins$island) <- \"Island\"\nlabel(penguins$bill_length_mm) <- \"Bill Length (mm)\"\n\ntable1(~ island + bill_length_mm | species, penguins)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"Rtable1\"><table class=\"Rtable1\">\n<thead>\n<tr>\n<th class='rowlabel firstrow lastrow'></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Adelie<br><span class='stratn'>(N=152)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Chinstrap<br><span class='stratn'>(N=68)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Gentoo<br><span class='stratn'>(N=124)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Overall<br><span class='stratn'>(N=344)</span></span></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class='rowlabel firstrow'>Island</td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n</tr>\n<tr>\n<td class='rowlabel'>Biscoe</td>\n<td>44 (28.9%)</td>\n<td>0 (0%)</td>\n<td>124 (100%)</td>\n<td>168 (48.8%)</td>\n</tr>\n<tr>\n<td class='rowlabel'>Dream</td>\n<td>56 (36.8%)</td>\n<td>68 (100%)</td>\n<td>0 (0%)</td>\n<td>124 (36.0%)</td>\n</tr>\n<tr>\n<td class='rowlabel lastrow'>Torgersen</td>\n<td class='lastrow'>52 (34.2%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>52 (15.1%)</td>\n</tr>\n<tr>\n<td class='rowlabel firstrow'>Bill Length (mm)</td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n</tr>\n<tr>\n<td class='rowlabel'>Mean (SD)</td>\n<td>38.8 (2.66)</td>\n<td>48.8 (3.34)</td>\n<td>47.5 (3.08)</td>\n<td>43.9 (5.46)</td>\n</tr>\n<tr>\n<td class='rowlabel'>Median [Min, Max]</td>\n<td>38.8 [32.1, 46.0]</td>\n<td>49.6 [40.9, 58.0]</td>\n<td>47.3 [40.9, 59.6]</td>\n<td>44.5 [32.1, 59.6]</td>\n</tr>\n<tr>\n<td class='rowlabel lastrow'>Missing</td>\n<td class='lastrow'>1 (0.7%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>1 (0.8%)</td>\n<td class='lastrow'>2 (0.6%)</td>\n</tr>\n</tbody>\n</table>\n</div>\n```\n\n:::\n:::\n\n\nUsing the `label<-()` function in table1 is how I've seen most people do it, but in truth there's nothing fancy here: all that the function does is set the \"label\" metadata attribute for the relevant object, so you could totally do it in base R via the `attr<-()` function:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nattr(penguins$bill_depth_mm, \"label\") <- \"Bill Depth (mm)\"\n\ntable1(~ island + bill_depth_mm | species, penguins)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"Rtable1\"><table class=\"Rtable1\">\n<thead>\n<tr>\n<th class='rowlabel firstrow lastrow'></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Adelie<br><span class='stratn'>(N=152)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Chinstrap<br><span class='stratn'>(N=68)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Gentoo<br><span class='stratn'>(N=124)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Overall<br><span class='stratn'>(N=344)</span></span></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class='rowlabel firstrow'>Island</td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n</tr>\n<tr>\n<td class='rowlabel'>Biscoe</td>\n<td>44 (28.9%)</td>\n<td>0 (0%)</td>\n<td>124 (100%)</td>\n<td>168 (48.8%)</td>\n</tr>\n<tr>\n<td class='rowlabel'>Dream</td>\n<td>56 (36.8%)</td>\n<td>68 (100%)</td>\n<td>0 (0%)</td>\n<td>124 (36.0%)</td>\n</tr>\n<tr>\n<td class='rowlabel lastrow'>Torgersen</td>\n<td class='lastrow'>52 (34.2%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>52 (15.1%)</td>\n</tr>\n<tr>\n<td class='rowlabel firstrow'>Bill Depth (mm)</td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n</tr>\n<tr>\n<td class='rowlabel'>Mean (SD)</td>\n<td>18.3 (1.22)</td>\n<td>18.4 (1.14)</td>\n<td>15.0 (0.981)</td>\n<td>17.2 (1.97)</td>\n</tr>\n<tr>\n<td class='rowlabel'>Median [Min, Max]</td>\n<td>18.4 [15.5, 21.5]</td>\n<td>18.5 [16.4, 20.8]</td>\n<td>15.0 [13.1, 17.3]</td>\n<td>17.3 [13.1, 21.5]</td>\n</tr>\n<tr>\n<td class='rowlabel lastrow'>Missing</td>\n<td class='lastrow'>1 (0.7%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>1 (0.8%)</td>\n<td class='lastrow'>2 (0.6%)</td>\n</tr>\n</tbody>\n</table>\n</div>\n```\n\n:::\n:::\n\n\nHowever, I am slowly coming to like the `setLabel()` convenience function in table1 because it returns the labelled object and hence plays nicely with a dplyr workflow: \n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins <- penguins |> \n  mutate(\n    flipper_length_mm = setLabel(flipper_length_mm, \"Flipper Length (mm)\"),\n    body_mass_g = setLabel(body_mass_g, \"Body Mass (g)\"),\n    sex = setLabel(sex, \"Sex\"),\n    year = setLabel(year, \"Year\")\n  )\n\ntable1(~ flipper_length_mm + body_mass_g + sex + year | species, penguins)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"Rtable1\"><table class=\"Rtable1\">\n<thead>\n<tr>\n<th class='rowlabel firstrow lastrow'></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Adelie<br><span class='stratn'>(N=152)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Chinstrap<br><span class='stratn'>(N=68)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Gentoo<br><span class='stratn'>(N=124)</span></span></th>\n<th class='firstrow lastrow'><span class='stratlabel'>Overall<br><span class='stratn'>(N=344)</span></span></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class='rowlabel firstrow'>Flipper Length (mm)</td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n</tr>\n<tr>\n<td class='rowlabel'>Mean (SD)</td>\n<td>190 (6.54)</td>\n<td>196 (7.13)</td>\n<td>217 (6.48)</td>\n<td>201 (14.1)</td>\n</tr>\n<tr>\n<td class='rowlabel'>Median [Min, Max]</td>\n<td>190 [172, 210]</td>\n<td>196 [178, 212]</td>\n<td>216 [203, 231]</td>\n<td>197 [172, 231]</td>\n</tr>\n<tr>\n<td class='rowlabel lastrow'>Missing</td>\n<td class='lastrow'>1 (0.7%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>1 (0.8%)</td>\n<td class='lastrow'>2 (0.6%)</td>\n</tr>\n<tr>\n<td class='rowlabel firstrow'>Body Mass (g)</td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n</tr>\n<tr>\n<td class='rowlabel'>Mean (SD)</td>\n<td>3700 (459)</td>\n<td>3730 (384)</td>\n<td>5080 (504)</td>\n<td>4200 (802)</td>\n</tr>\n<tr>\n<td class='rowlabel'>Median [Min, Max]</td>\n<td>3700 [2850, 4780]</td>\n<td>3700 [2700, 4800]</td>\n<td>5000 [3950, 6300]</td>\n<td>4050 [2700, 6300]</td>\n</tr>\n<tr>\n<td class='rowlabel lastrow'>Missing</td>\n<td class='lastrow'>1 (0.7%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>1 (0.8%)</td>\n<td class='lastrow'>2 (0.6%)</td>\n</tr>\n<tr>\n<td class='rowlabel firstrow'>Sex</td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n</tr>\n<tr>\n<td class='rowlabel'>female</td>\n<td>73 (48.0%)</td>\n<td>34 (50.0%)</td>\n<td>58 (46.8%)</td>\n<td>165 (48.0%)</td>\n</tr>\n<tr>\n<td class='rowlabel'>male</td>\n<td>73 (48.0%)</td>\n<td>34 (50.0%)</td>\n<td>61 (49.2%)</td>\n<td>168 (48.8%)</td>\n</tr>\n<tr>\n<td class='rowlabel lastrow'>Missing</td>\n<td class='lastrow'>6 (3.9%)</td>\n<td class='lastrow'>0 (0%)</td>\n<td class='lastrow'>5 (4.0%)</td>\n<td class='lastrow'>11 (3.2%)</td>\n</tr>\n<tr>\n<td class='rowlabel firstrow'>Year</td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n<td class='firstrow'></td>\n</tr>\n<tr>\n<td class='rowlabel'>Mean (SD)</td>\n<td>2010 (0.822)</td>\n<td>2010 (0.863)</td>\n<td>2010 (0.792)</td>\n<td>2010 (0.818)</td>\n</tr>\n<tr>\n<td class='rowlabel lastrow'>Median [Min, Max]</td>\n<td class='lastrow'>2010 [2010, 2010]</td>\n<td class='lastrow'>2010 [2010, 2010]</td>\n<td class='lastrow'>2010 [2010, 2010]</td>\n<td class='lastrow'>2010 [2010, 2010]</td>\n</tr>\n</tbody>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n## Custom statistics\n\n\n::: {.cell}\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/table1-1.0/table1_defaults.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}