---
title: A toy blog
output:
  litedown::html_format:
    options:
      toc: true
---

Posts are listed on the front page, there's nothing at all special here. You probably want to return to the [targets blog post](..).

```{r}
#| echo: false
#| results: "asis"

# shared functions
source(fs::path(
  rprojroot::find_root(rprojroot::has_file("_targets.R")),
  "scripts",
  "common.R"
))
opts <- get_options()

# list of posts
post_dir <- fs::path(opts$root, opts$post)
post <- post_dir |>
  fs::dir_ls(
    recurse = TRUE,
    regexp = "[.][rR]?md$"
  ) |> 
  fs::path_rel(post_dir) |> 
  fs::path_ext_remove() |> 
  fs::path_ext_set(".html") |> 
  setdiff("index.html")

purrr::walk(
  rev(post), 
  \(p) {
    t <- p |> 
      fs::path_dir() |> 
      fs::path_split() |> 
      unlist() |> 
      paste(collapse = " / ")
    l <- paste0("[", t, "](", p, ")")
    cat("-", l, "\n")
  }
)
```

